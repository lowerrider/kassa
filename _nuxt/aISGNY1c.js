import{J as x,t as c,v as i,x as e,K as y,L as g,y as d,M as l,_ as f,i as b,r as m,o as v,z as h}from"./Drj_pIjX.js";const p=x("cart",{state:()=>({products:[],cart:[]}),getters:{total(r){return r.cart.reduce((t,a)=>t+a.totalPrice,0)}},actions:{async fetchProducts(){console.log("Загрузка товаров..."),this.products=[{id:1,name:"Кофе",price:150,category:"Напитки"},{id:2,name:"Чай",price:100,category:"Напитки"},{id:3,name:"Пирожное",price:200,category:"Десерты"},{id:4,name:"Пицца",price:200,category:"Десерты"},{id:5,name:"Пиво",price:200,category:"Десерты"}],console.log("Товары загружены:",this.products)},addToCart(r){const t=this.cart.find(a=>a.id===r.id);t?(t.quantity++,t.totalPrice=t.quantity*t.price):this.cart.push({...r,quantity:1,totalPrice:r.price})},removeFromCart(r){this.cart=this.cart.filter(t=>t.id!==r)},checkout(){alert(`Оплачено: ${this.total}₽`),this.cart=[]}}}),C={class:"w-1/3 bg-white p-6 shadow-lg rounded-lg flex flex-col"},k={class:"flex-1 text-gray-700 text-lg truncate"},w={class:"flex items-center space-x-3"},$={class:"flex items-center space-x-2"},Q=["onClick","disabled"],P={class:"font-semibold text-gray-800 text-lg"},S=["onClick"],q={class:"flex items-center space-x-3 w-24"},L={class:"font-semibold text-gray-800 text-lg"},F=["onClick"],j={class:"flex justify-between mt-4"},B={class:"font-bold text-2xl text-gray-900"},T={class:"mt-auto"},I=["disabled"],M={__name:"Check",setup(r){const t=p();function a(n,s){n.quantity+s<=0?t.removeFromCart(n.id):(n.quantity+=s,n.totalPrice=n.quantity*n.price)}return(n,s)=>(c(),i("div",C,[s[2]||(s[2]=e("h2",{class:"text-2xl font-semibold text-center mb-6 text-gray-800"},"Чек",-1)),(c(!0),i(y,null,g(l(t).cart,o=>(c(),i("div",{key:o.id,class:"flex justify-between items-center p-4 border-b border-gray-200 last:border-b-0 hover:bg-gray-50 transition-colors"},[e("span",k,d(o.name),1),e("div",w,[e("div",$,[e("button",{onClick:_=>a(o,-1),disabled:o.quantity===1,class:"text-gray-600 hover:text-gray-800 disabled:opacity-50 transition-colors"}," ➖ ",8,Q),e("span",P,d(o.quantity),1),e("button",{onClick:_=>a(o,1),class:"text-gray-600 hover:text-gray-800 transition-colors"}," ➕ ",8,S)]),e("div",q,[e("span",L,d(o.totalPrice)+"₽",1),e("button",{onClick:_=>l(t).removeFromCart(o.id),class:"text-red-500 hover:text-red-700 transition-colors text-lg"}," ❌ ",8,F)])])]))),128)),e("div",j,[s[1]||(s[1]=e("h3",{class:"text-lg font-semibold text-gray-800"},"Итого:",-1)),e("span",B,d(l(t).total)+"₽",1)]),e("div",T,[e("button",{onClick:s[0]||(s[0]=(...o)=>l(t).checkout&&l(t).checkout(...o)),disabled:l(t).cart.length===0,class:"w-full bg-green-500 text-white py-3 rounded-full hover:bg-green-600 transition-all duration-200 ease-in-out hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:hover:bg-gray-400"}," Оплатить ",8,I)])]))}},N=["value"],V={__name:"Search",props:["searchQuery"],setup(r,{emit:t}){const a=t;function n(s){a("update:searchQuery",s.target.value)}return(s,o)=>(c(),i("input",{value:r.searchQuery,onInput:n,type:"text",placeholder:"Поиск товаров...",class:"w-full p-2 mb-4 border rounded"},null,40,N))}},z={class:"grid grid-cols-2 gap-4"},A=["onClick"],D={class:"font-medium"},E={class:"text-blue-500 font-semibold"},J={__name:"ProductList",props:{searchQuery:String,products:Array},setup(r){const t=r,a=p(),n=b(()=>t.products.filter(o=>o.name.toLowerCase().includes(t.searchQuery.toLowerCase())));function s(o){a.addToCart(o)}return(o,_)=>(c(),i("div",null,[e("div",z,[(c(!0),i(y,null,g(n.value,u=>(c(),i("button",{key:u.id,onClick:H=>s(u),class:"p-3 bg-white shadow rounded-lg flex justify-between items-center hover:bg-gray-200"},[e("span",D,d(u.name),1),e("span",E,d(u.price)+"₽",1)],8,A))),128))])]))}},K=f(J,[["__scopeId","data-v-6a48c285"]]),U={class:"flex h-screen"},G={class:"w-2/3 p-5"},R={__name:"index",setup(r){const t=m(""),a=p();return v(async()=>{await a.fetchProducts()}),(n,s)=>(c(),i("div",U,[h(M),e("div",G,[s[1]||(s[1]=e("h1",{class:"text-3xl font-bold mb-4"},"Касса",-1)),h(V,{searchQuery:t.value,"onUpdate:searchQuery":s[0]||(s[0]=o=>t.value=o)},null,8,["searchQuery"]),h(K,{searchQuery:t.value,products:l(a).products},null,8,["searchQuery","products"])])]))}};export{R as default};
